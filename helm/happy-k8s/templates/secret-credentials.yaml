{{- if or .Values.credentials.claude .Values.credentials.claudeMaxToken }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "happy-k8s.credentialsSecretName" . }}
  labels:
    {{- include "happy-k8s.labels" . | nindent 4 }}
type: Opaque
stringData:
  {{- if .Values.credentials.claudeMaxToken }}
  # Long-lived token from 'claude setup-token' - preferred method
  claude-max-token: {{ .Values.credentials.claudeMaxToken | quote }}
  {{- end }}
  {{- if .Values.credentials.claude }}
  # Legacy credentials.json (deprecated)
  credentials.json: {{ .Values.credentials.claude | toJson }}
  {{- end }}
{{- end }}
